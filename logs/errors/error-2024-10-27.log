{"timestamp":"2024-10-26T18:47:03.892Z","level":"error","message":"Error updating usage stats for API key a776f1e4-5f24-49a9-a1d2-81fb5c48081c","apiKeyId":"a776f1e4-5f24-49a9-a1d2-81fb5c48081c","error":"column \"current_daily_usage\" of relation \"api_usage\" does not exist","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T18:47:03.894Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: column \"current_daily_usage\" of relation \"api_usage\" does not exist"}
{"timestamp":"2024-10-26T18:47:31.347Z","level":"error","message":"Error updating usage stats for API key a776f1e4-5f24-49a9-a1d2-81fb5c48081c","apiKeyId":"a776f1e4-5f24-49a9-a1d2-81fb5c48081c","error":"column \"current_daily_usage\" of relation \"api_usage\" does not exist","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T18:47:31.348Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: column \"current_daily_usage\" of relation \"api_usage\" does not exist"}
{"timestamp":"2024-10-26T19:01:09.770Z","level":"error","message":"Error updating usage stats for API key a776f1e4-5f24-49a9-a1d2-81fb5c48081c","apiKeyId":"a776f1e4-5f24-49a9-a1d2-81fb5c48081c","error":"column \"created_at\" does not exist","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T19:01:09.771Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: column \"created_at\" does not exist"}
{"timestamp":"2024-10-26T19:05:46.143Z","level":"error","message":"Error updating usage stats for API key a776f1e4-5f24-49a9-a1d2-81fb5c48081c","apiKeyId":"a776f1e4-5f24-49a9-a1d2-81fb5c48081c","error":"column \"current_daily_usage\" does not exist","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T19:05:46.144Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: column \"current_daily_usage\" does not exist"}
{"timestamp":"2024-10-26T19:42:49.593Z","level":"error","message":"Error generating API key: notNull Violation: ApiKey.status cannot be null","name":"SequelizeValidationError","errors":[{"message":"ApiKey.status cannot be null","type":"notNull Violation","path":"status","value":null,"origin":"CORE","instance":{"id":"a4f0f47d-b2f3-4d69-95c0-f8a1dadbbe58","created_at":{"val":"CURRENT_TIMESTAMP"},"updated_at":{"val":"CURRENT_TIMESTAMP"},"user_id":"user@example.com","api_key":"ef57e6648c4c59e7bbb0a0eb190b6ec507abc11aee8bb95b0428176d7f27682b","metadata":{"company":"Example Corp","plan":"premium"},"endpoints_allowed":["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],"rate_limit":1000,"daily_limit":10,"monthly_limit":30},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}],"stack":"SequelizeValidationError: notNull Violation: ApiKey.status cannot be null\n    at InstanceValidator._validate (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:32:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:100:24"}
{"timestamp":"2024-10-26T19:42:49.595Z","level":"error","message":"Error generating API key: notNull Violation: ApiKey.status cannot be null","name":"SequelizeValidationError","errors":[{"message":"ApiKey.status cannot be null","type":"notNull Violation","path":"status","value":null,"origin":"CORE","instance":{"id":"a4f0f47d-b2f3-4d69-95c0-f8a1dadbbe58","created_at":{"val":"CURRENT_TIMESTAMP"},"updated_at":{"val":"CURRENT_TIMESTAMP"},"user_id":"user@example.com","api_key":"ef57e6648c4c59e7bbb0a0eb190b6ec507abc11aee8bb95b0428176d7f27682b","metadata":{"company":"Example Corp","plan":"premium"},"endpoints_allowed":["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],"rate_limit":1000,"daily_limit":10,"monthly_limit":30},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}],"stack":"SequelizeValidationError: notNull Violation: ApiKey.status cannot be null\n    at InstanceValidator._validate (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2426:7)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:32:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:100:24"}
{"timestamp":"2024-10-26T19:46:12.230Z","level":"error","message":"Error updating usage stats for API key 99064c65-2cee-4a7b-a153-2ba793723446","apiKeyId":"99064c65-2cee-4a7b-a153-2ba793723446","error":"syntax error at or near \"(\"","stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiUsage.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async ApiUsage.findOrCreate (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1422:25)\n    at async updateUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:57:30)\n    at async complexRateLimitMiddleware (/Users/agni/Documents/CODE/aptintel/creds-api-backend/middlewares/complexRateLimitMiddleware.js:18:7)","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T19:46:12.231Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: syntax error at or near \"(\""}
{"timestamp":"2024-10-26T19:53:19.068Z","level":"error","message":"Error updating usage stats for API key 531b4550-64f1-4237-a90f-00a9cfb503ff","apiKeyId":"531b4550-64f1-4237-a90f-00a9cfb503ff","error":"syntax error at or near \"(\"","stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiUsage.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async updateUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:63:15)\n    at async complexRateLimitMiddleware (/Users/agni/Documents/CODE/aptintel/creds-api-backend/middlewares/complexRateLimitMiddleware.js:18:7)","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T19:53:19.069Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: syntax error at or near \"(\""}
{"timestamp":"2024-10-26T19:57:13.632Z","level":"error","message":"Error updating usage stats for API key 054744c7-c41f-4566-8d83-470db88e7558","apiKeyId":"054744c7-c41f-4566-8d83-470db88e7558","error":"syntax error at or near \"(\"","stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiUsage.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async updateUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:63:15)\n    at async complexRateLimitMiddleware (/Users/agni/Documents/CODE/aptintel/creds-api-backend/middlewares/complexRateLimitMiddleware.js:18:7)","event":"usage_stats_update_error"}
{"timestamp":"2024-10-26T19:57:13.633Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: syntax error at or near \"(\""}
{"timestamp":"2024-10-26T20:02:19.127Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: Transaction cannot be rolled back because it has been finished with state: rollback"}
{"timestamp":"2024-10-26T20:12:18.250Z","level":"error","message":"Unexpected error in complexRateLimitMiddleware: Transaction cannot be rolled back because it has been finished with state: rollback"}
{"timestamp":"2024-10-26T21:05:30.383Z","level":"error","message":"Error in complexRateLimitMiddleware: column reference \"daily_requests\" is ambiguous"}
{"timestamp":"2024-10-26T21:44:22.390Z","level":"error","message":"Error generating API key: column \"timezone\" of relation \"api_keys\" does not exist","name":"SequelizeDatabaseError","parent":{"length":130,"name":"error","severity":"ERROR","code":"42703","position":"133","file":"parse_target.c","line":"1061","routine":"checkInsertTargets","sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"]},"original":{"length":130,"name":"error","severity":"ERROR","code":"42703","position":"133","file":"parse_target.c","line":"1061","routine":"checkInsertTargets","sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"]},"sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"],"stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:27:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:102:24"}
{"timestamp":"2024-10-26T21:44:22.391Z","level":"error","message":"Error generating API key: column \"timezone\" of relation \"api_keys\" does not exist","name":"SequelizeDatabaseError","parent":{"length":130,"name":"error","severity":"ERROR","code":"42703","position":"133","file":"parse_target.c","line":"1061","routine":"checkInsertTargets","sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"]},"original":{"length":130,"name":"error","severity":"ERROR","code":"42703","position":"133","file":"parse_target.c","line":"1061","routine":"checkInsertTargets","sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"]},"sql":"INSERT INTO \"api_keys\" (\"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,$11) RETURNING \"id\",\"user_id\",\"api_key\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"timezone\",\"created_at\",\"updated_at\",\"last_reset_date\";","parameters":["5a21a407-8d3d-4439-a958-efe5f0169edf","user@example.com","d6895ef83b464eb286175e4bd68747ab5a36dbd43f53bcb31724b8ed19f496c3","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["/api/json/v1/search-by-mail/bulk","/api/json/v1/search-by-domain"],1000,10,30,"UTC","2024-10-27"],"stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:27:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:102:24"}
{"timestamp":"2024-10-26T21:51:02.621Z","level":"error","message":"Error in complexRateLimitMiddleware: Cannot destructure property 'updated_daily_requests' of 'results' as it is undefined."}
{"timestamp":"2024-10-26T21:53:41.780Z","level":"error","message":"No results returned from reset_and_update_usage for API key: 40ab3253-c2fb-452d-845c-7b1a291ec6f6"}
{"timestamp":"2024-10-26T21:53:42.015Z","level":"error","message":"Error in updateUsageStats: Failed to update usage stats"}
{"timestamp":"2024-10-26T21:53:42.016Z","level":"error","message":"Error in complexRateLimitMiddleware: Failed to update usage stats"}
{"timestamp":"2024-10-26T21:53:44.044Z","level":"error","message":"No results returned from reset_and_update_usage for API key: 40ab3253-c2fb-452d-845c-7b1a291ec6f6"}
{"timestamp":"2024-10-26T21:53:44.273Z","level":"error","message":"Error in updateUsageStats: Failed to update usage stats"}
{"timestamp":"2024-10-26T21:53:44.274Z","level":"error","message":"Error in complexRateLimitMiddleware: Failed to update usage stats"}
{"timestamp":"2024-10-26T22:25:01.352Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (usage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (usage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:25:01.354Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (usage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (usage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)"}
{"timestamp":"2024-10-26T22:30:09.904Z","level":"error","message":"Error in updateUsageStats: Usage limit exceeded: daily"}
{"timestamp":"2024-10-26T22:34:32.450Z","level":"error","message":"Error in updateUsageStats: Usage limit exceeded: daily"}
{"timestamp":"2024-10-26T22:47:47.253Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:125:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:47:47.254Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:125:20)"}
{"timestamp":"2024-10-26T22:49:25.021Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:49:25.022Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (apiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)"}
{"timestamp":"2024-10-26T22:50:42.791Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:50:42.792Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)"}
{"timestamp":"2024-10-26T22:52:25.926Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:52:25.927Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)"}
{"timestamp":"2024-10-26T22:53:50.561Z","level":"error","message":"Error getting usage stats for API key 40ab3253-c2fb-452d-845c-7b1a291ec6f6","apiKeyId":"40ab3253-c2fb-452d-845c-7b1a291ec6f6","error":"ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)","event":"usage_stats_retrieval_error"}
{"timestamp":"2024-10-26T22:53:50.563Z","level":"error","message":"Error fetching usage statistics: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).","name":"SequelizeEagerLoadingError","stack":"SequelizeEagerLoadingError: ApiUsage is associated to ApiKey using an alias. You've included an alias (ApiUsage), but it does not match the alias(es) defined in your association (ApiUsages).\n    at ApiKey._getIncludedAssociation (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:574:15)\n    at ApiKey._validateIncludedElement (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:502:53)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:421:37\n    at Array.map (<anonymous>)\n    at ApiKey._validateIncludedElements (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:417:39)\n    at ApiKey.findAll (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async ApiKey.findOne (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async ApiKey.findByPk (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1221:12)\n    at async getUsageStats (/Users/agni/Documents/CODE/aptintel/creds-api-backend/services/loggingService.js:124:20)"}
{"timestamp":"2024-10-26T22:58:04.819Z","level":"error","message":"Error in updateUsageStats: Usage limit exceeded: daily"}
