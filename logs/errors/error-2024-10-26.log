{"timestamp":"2024-10-26T06:44:45.498Z","level":"error","message":"Unexpected error in rate limit middleware: Cannot read properties of undefined (reading 'daily_requests')"}
{"timestamp":"2024-10-26T06:44:50.436Z","level":"error","message":"Unexpected error in rate limit middleware: Cannot read properties of undefined (reading 'daily_requests')"}
{"timestamp":"2024-10-26T06:46:36.671Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T06:46:36.672Z","level":"error","message":"Unexpected error in rate limit middleware: RedisStore is not a constructor"}
{"timestamp":"2024-10-26T06:46:36.673Z","level":"error","message":"Stack trace: TypeError: RedisStore is not a constructor\n    at complexRateLimitMiddleware (/Users/agni/Documents/CODE/aptintel/creds-api-backend/middlewares/complexRateLimitMiddleware.js:54:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"timestamp":"2024-10-26T06:50:19.614Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T06:52:17.414Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T06:53:06.043Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T06:53:24.434Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T06:59:11.645Z","level":"error","message":"Usage stats are undefined after fetching"}
{"timestamp":"2024-10-26T07:51:19.846Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T07:52:33.534Z","level":"error","message":"Error generating API key: invalid input syntax for type json","name":"SequelizeDatabaseError","parent":{"length":194,"name":"error","severity":"ERROR","code":"22P02","detail":"Expected \":\", but found \"}\".","where":"JSON data, line 1: {\"all\"}\nunnamed portal parameter $6 = '...'","file":"jsonfuncs.c","line":"627","routine":"json_ereport_error","sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["b1931e6b-54a1-44b6-a8cd-850588468f2d","a3a3d1ae60a3503a06d0e3af8e40d332ace7d7367376cefdae985299e5e3c2e8","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:52:33.263 +00:00","2024-10-26 07:52:33.263 +00:00"]},"original":{"length":194,"name":"error","severity":"ERROR","code":"22P02","detail":"Expected \":\", but found \"}\".","where":"JSON data, line 1: {\"all\"}\nunnamed portal parameter $6 = '...'","file":"jsonfuncs.c","line":"627","routine":"json_ereport_error","sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["b1931e6b-54a1-44b6-a8cd-850588468f2d","a3a3d1ae60a3503a06d0e3af8e40d332ace7d7367376cefdae985299e5e3c2e8","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:52:33.263 +00:00","2024-10-26 07:52:33.263 +00:00"]},"sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["b1931e6b-54a1-44b6-a8cd-850588468f2d","a3a3d1ae60a3503a06d0e3af8e40d332ace7d7367376cefdae985299e5e3c2e8","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:52:33.263 +00:00","2024-10-26 07:52:33.263 +00:00"],"stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:27:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:98:24"}
{"timestamp":"2024-10-26T07:55:05.352Z","level":"error","message":"Error generating API key: invalid input syntax for type json","name":"SequelizeDatabaseError","parent":{"length":194,"name":"error","severity":"ERROR","code":"22P02","detail":"Expected \":\", but found \"}\".","where":"JSON data, line 1: {\"all\"}\nunnamed portal parameter $6 = '...'","file":"jsonfuncs.c","line":"627","routine":"json_ereport_error","sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["bc72a766-e885-4b81-a953-c09a72588449","9ff73a81749dd92149a2bd535865939526c7a3199b76b920ac4f935f58a95c0b","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:55:05.073 +00:00","2024-10-26 07:55:05.073 +00:00"]},"original":{"length":194,"name":"error","severity":"ERROR","code":"22P02","detail":"Expected \":\", but found \"}\".","where":"JSON data, line 1: {\"all\"}\nunnamed portal parameter $6 = '...'","file":"jsonfuncs.c","line":"627","routine":"json_ereport_error","sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["bc72a766-e885-4b81-a953-c09a72588449","9ff73a81749dd92149a2bd535865939526c7a3199b76b920ac4f935f58a95c0b","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:55:05.073 +00:00","2024-10-26 07:55:05.073 +00:00"]},"sql":"INSERT INTO \"api_keys\" (\"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING \"id\",\"api_key\",\"user_id\",\"status\",\"metadata\",\"endpoints_allowed\",\"rate_limit\",\"daily_limit\",\"monthly_limit\",\"created_at\",\"updated_at\";","parameters":["bc72a766-e885-4b81-a953-c09a72588449","9ff73a81749dd92149a2bd535865939526c7a3199b76b920ac4f935f58a95c0b","user@example.com","active","{\"company\":\"Example Corp\",\"plan\":\"premium\"}",["all"],1000,10,30,"2024-10-26 07:55:05.073 +00:00","2024-10-26 07:55:05.073 +00:00"],"stack":"Error\n    at Query.run (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async PostgresQueryInterface.insert (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async model.save (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async ApiKey.create (/Users/agni/Documents/CODE/aptintel/creds-api-backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async generateApiKey (/Users/agni/Documents/CODE/aptintel/creds-api-backend/utils/apiKeyUtils.js:27:23)\n    at async /Users/agni/Documents/CODE/aptintel/creds-api-backend/app.js:98:24"}
{"timestamp":"2024-10-26T08:04:25.921Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:06:04.462Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:08:48.743Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:09:03.399Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:13:05.753Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:13:32.892Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:13:55.436Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
{"timestamp":"2024-10-26T08:14:02.619Z","level":"error","message":"Error fetching usage stats: ApiUsage is not defined"}
